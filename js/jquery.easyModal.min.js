(function(e){"use strict";var t={init:function(t){var n={top:"auto",autoOpen:false,overlayOpacity:.5,overlayColor:"#000",overlayClose:true,overlayParent:"body",closeOnEscape:true,closeButtonClass:".close",transitionIn:"",transitionOut:"",onOpen:false,onClose:false,zIndex:function(){return function(e){return e===-Infinity?0:e+1}(Math.max.apply(Math,e.makeArray(e("*").map(function(){return e(this).css("z-index")}).filter(function(){return e.isNumeric(this)}).map(function(){return parseInt(this,10)}))))},updateZIndexOnOpen:true};t=e.extend(n,t);return this.each(function(){var n=t,r=e('<div class="lean-overlay"></div>'),i=e(this);r.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex(),top:0,left:0,height:"100%",width:"100%",background:n.overlayColor,opacity:n.overlayOpacity,overflow:"auto"}).appendTo(n.overlayParent);i.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex()+1,left:50+"%",top:parseInt(n.top,10)>-1?n.top+"px":50+"%"});i.bind("openModal",function(){var e=n.updateZIndexOnOpen?n.zIndex():parseInt(r.css("z-index"),10),t=e+1;if(n.transitionIn!==""&&n.transitionOut!==""){i.removeClass(n.transitionOut).addClass(n.transitionIn)}i.css({display:"block","margin-left":-(i.outerWidth()/2)+"px","margin-top":(parseInt(n.top,10)>-1?0:-(i.outerHeight()/2))+"px","z-index":t});r.css({"z-index":e,display:"block"});if(n.onOpen&&typeof n.onOpen==="function"){n.onOpen(i[0])}});i.bind("closeModal",function(){if(n.transitionIn!==""&&n.transitionOut!==""){i.removeClass(n.transitionIn).addClass(n.transitionOut);i.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.css("display","none");r.css("display","none")})}else{i.css("display","none");r.css("display","none")}if(n.onClose&&typeof n.onClose==="function"){n.onClose(i[0])}});r.click(function(){if(n.overlayClose){i.trigger("closeModal")}});e(document).keydown(function(e){if(n.closeOnEscape&&e.keyCode===27){i.trigger("closeModal")}});i.on("click",n.closeButtonClass,function(e){i.trigger("closeModal");e.preventDefault()});if(n.autoOpen){i.trigger("openModal")}})}};e.fn.easyModal=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof n==="object"||!n){return t.init.apply(this,arguments)}e.error("Method "+n+" does not exist on jQuery.easyModal")}})(jQuery)